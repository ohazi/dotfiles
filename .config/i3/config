# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
#font pango:monospace 11
#font pango:Inconsolata 11
#font pango:Noto Sans Regular 10
font pango:Cantarell Regular 11

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock -c 706090 -f --nofork
bindsym $mod+Shift+l exec --no-startup-id loginctl lock-session

# Set keyboard repeat rate to something reasonable
exec_always --no-startup-id xset r rate 500 40

# NetworkManager is the most popular way to manage wireless networks on Linux,
# and nm-applet is a desktop environment-independent system tray GUI for it.
exec_always --no-startup-id nm-applet

# Bluetooth manager
exec_always --no-startup-id blueman-tray

# Display mode
# Set initial display mode, then allow manual refresh.
exec --no-startup-id set_display_mode.sh
bindsym $mod+BackSpace exec --no-startup-id set_display_mode.sh

# Background
# set_display_mode.sh takes care of this, and running it twice appears to race
# (probably Xlib).
#exec_always --no-startup-id ~/.fehbg

# Compositor
exec --no-startup-id picom --experimental-backends -b

# Calendar
exec_always --no-startup-id pgrep -x orage || orage

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3blocks_volume pkill -SIGRTMIN+1 i3blocks
# Two slashes gives an actual slash to echo, third slash gives you the quote
set $notify_volume echo Volume \\'$(volume.sh)\\' | xargs notify-send -h string:x-canonical-private-synchronous:volume
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3blocks_volume && $notify_volume
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3blocks_volume && $notify_volume
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3blocks_volume && $notify_volume
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3blocks_volume

# Use xbacklight to adjust display backlight.
set $notify_backlight echo Backlight `xbacklight -get`% | xargs notify-send -h string:x-canonical-private-synchronous:backlight
bindsym XF86MonBrightnessUp exec --no-startup-id xbacklight -inc 10 && $notify_backlight
bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 10 && $notify_backlight

# Print screen key
bindsym Print exec xfce4-screenshooter

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
#bindsym $mod+Return exec i3-sensible-terminal
#bindsym $mod+Return exec alacritty
bindsym $mod+Return exec xfce4-terminal --hide-menubar --hide-scrollbar

# start a web browser
bindsym $mod+b exec firefox

# kill focused window
bindsym $mod+Shift+q kill

# start dmenu (a program launcher)
#bindsym $mod+d exec dmenu_run
bindsym $mod+d exec "rofi -combi-modi run,drun -show combi -modi combi,run,drun -display-combi launcher"
# "-theme ~/.config/rofi/rofi/launchers/style_normal_rainbow_sidebar.rasi"
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

bindsym $mod+c exec "CM_LAUNCHER=rofi clipmenu"

bindsym $mod+j exec "rofimoji -c"

bindsym $mod+p exec "rofipass"

# change focus
#bindsym $mod+j focus left
#bindsym $mod+k focus down
#bindsym $mod+l focus up
#bindsym $mod+semicolon focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
#bindsym $mod+Shift+j move left
#bindsym $mod+Shift+k move down
#bindsym $mod+Shift+l move up
#bindsym $mod+Shift+semicolon move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
#bindsym $mod+Shift+space floating toggle

# toggle tiling (without title) / floating (with title)
# hack for i3-gaps, which doesn't like titles
# toggles floating without title hack if an i3 container is selected
bindsym $mod+Shift+space exec --no-startup-id toggle_floating_with_title.sh

# manually enable / disable title
#bindsym $mod+t border normal 2
#bindsym $mod+Shift+t border pixel 2
#bindsym $mod+t exec --no-startup-id toggle_i3_titlebar
bindsym $mod+t exec --no-startup-id "oi3h border -t 'normal 2' 'pixel 2'"

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+Shift+a focus child

# simple mark M
bindsym $mod+m mark --add M
bindsym $mod+Shift+m swap container with mark M
bindsym $mod+n unmark M

# This doesn't seem to work, and even if it did, it's not a great indicator.
#for_window [class=.*] [con_mark=M] border pixel 4
# This sort of works... 
# but it hides the titlebar when you mark / unmark a floating window
#bindsym $mod+m [con_mark=M] border pixel 2; mark --add M, border pixel 5
#bindsym $mod+Shift+m swap container with mark M
#bindsym$mod+n [con_mark=M] unmark M, border pixel 2


# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1:<span font_features='tnum'>1</span>"
set $ws2 "2:<span font_features='tnum'>2</span>"
set $ws3 "3:<span font_features='tnum'>3</span>"
set $ws4 "4:<span font_features='tnum'>4</span>"
set $ws5 "5:<span font_features='tnum'>5</span>"
set $ws6 "6:<span font_features='tnum'>6</span>"
set $ws7 "7:<span font_features='tnum'>7</span>"
set $ws8 "8:<span font_features='tnum'>8</span>"
set $ws9 "9:<span font_features='tnum'>9</span>"
set $ws10 "10:<span font_features='tnum'>10</span>"

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
#bindsym $mod+Shift+r restart
bindsym $mod+Shift+r exec --no-startup-id restart_i3_and_picom.sh
# exit i3 (logs you out of your X session)
#bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"
#bindsym $mod+Shift+e exec exit_menu.sh

set $mode_exit (e)xit i3, (l)ock, (s)uspend, (h)ibernate, H(y)brid Sleep, Suspend (t)hen Hibernate, (r)eboot, Shut(d)own
bindsym $mod+Shift+e mode "$mode_exit"

mode "$mode_exit" {
    bindsym e exit
    bindsym l mode "default", exec --no-startup-id loginctl lock-session
    bindsym s mode "default", exec --no-startup-id systemctl suspend
    bindsym h mode "default", exec --no-startup-id systemctl hibernate
    bindsym y mode "default", exec --no-startup-id systemctl hybrid-sleep
    bindsym t mode "default", exec --no-startup-id systemctl suspend-then-hibernate
    bindsym r mode "default", exec --no-startup-id systemctl reboot
    bindsym d mode "default", exec --no-startup-id systemctl poweroff
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# resize window (you can also use the mouse for that)
mode "resize" {
    # These bindings trigger as soon as you enter the resize mode

    # Pressing left will shrink the window’s width.
    # Pressing right will grow the window’s width.
    # Pressing up will shrink the window’s height.
    # Pressing down will grow the window’s height.
    bindsym j resize shrink width 10 px or 2 ppt
    bindsym k resize grow height 10 px or 2 ppt
    bindsym l resize shrink height 10 px or 2 ppt
    bindsym semicolon resize grow width 10 px or 2 ppt

    # same bindings, but for the arrow keys
    bindsym Left resize shrink width 10 px or 2 ppt
    bindsym Down resize grow height 10 px or 2 ppt
    bindsym Up resize shrink height 10 px or 2 ppt
    bindsym Right resize grow width 10 px or 2 ppt

    # back to normal: Enter or Escape or $mod+r
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"


# Color definitions:
# Text
set $text_fg        #FFFFFF
set $text_bg        #888888

# i3bar
set $bar_bg         #302230
set $bar_sep        #695963

set $ws_focused     #706090
set $ws_focused_b   #5B4E74

set $ws_inactive    #422F42
set $ws_inactive_b  #573D57 

set $ws_urgent      #D22C53
set $ws_urgent_b    #F1914B

# Window borders
set $focused        #F1914B
set $focused_b      #E76D48
set $focused_i      #D22C53

set $inactive       #706090
set $inactive_b     #573D57
set $inactive_i     #9B91AF

set $unfocused      #422F42

set $urgent         #D22C53
set $urgent_b       #900000
set $urgent_i       #F1914B

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
    #output primary
    position top

    tray_output primary
    # Obey Fitts's law
    tray_padding 0

    status_command i3blocks

    font pango:Cantarell, Font Awesome 5 Free, Material Design Icons Regular 11
    strip_workspace_numbers yes

    #separator_symbol "|"

    # This gives the system tray area a fully transparent background,
    # which looks weird. Use compositor instead, for now.
    #i3bar_command i3bar --transparency

    colors {
        background  $bar_bg
        statusline  $text_fg
        separator   $bar_sep

        # class             border          background      text
        focused_workspace   $ws_focused_b   $ws_focused     $text_fg

        # TODO: active_workspace is the visible workspace on a second
        # display when the display is not focused.
        active_workspace    #333333         #5f676a         #ffffff

        inactive_workspace  $ws_inactive_b  $ws_inactive    $text_bg
        urgent_workspace    $ws_urgent_b    $ws_urgent      $text_fg
        binding_mode        $ws_urgent_b    $ws_urgent      $text_fg
    }

    # defaults:
    #colors {
    #    background #000000
    #    statusline #ffffff
    #    separator #666666

    #    focused_workspace  #4c7899 #285577 #ffffff
    #    active_workspace   #333333 #5f676a #ffffff
    #    inactive_workspace #333333 #222222 #888888
    #    urgent_workspace   #2f343a #900000 #ffffff
    #    binding_mode       #2f343a #900000 #ffffff
    #}
}

# border = color of thin (1px?) border around titlebar box
# background = background color of titlebar box
# text = title text color
# indicator = color of new window indicator stripe
# child_border = color of actual window border

# class                 border          background      text        indicator       child_border
client.focused          $focused_b      $focused        $text_fg    $focused_i      $focused
client.focused_inactive $inactive_b     $inactive       $text_fg    $inactive_i     $inactive
client.unfocused        $inactive_b     $unfocused      $text_bg    $inactive_i     $unfocused
client.urgent           $urgent_b       $urgent         $text_fg    $urgent_i       $urgent
client.placeholder      #000000         #0c0c0c         #ffffff     #000000         #0c0c0c

client.background       #ffffff

# defaults:
# class                 border  backgr. text    indicator child_border
#client.focused          #4c7899 #285577 #ffffff #2e9ef4   #285577
#client.focused_inactive #333333 #5f676a #ffffff #484e50   #5f676a
#client.unfocused        #333333 #222222 #888888 #292d2e   #222222
#client.urgent           #2f343a #900000 #ffffff #900000   #900000
#client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c

#client.background       #ffffff


# Disable titlebar for gaps
# Note: Some GTK3 apps (Adwaita) show up without a border unless you have this
# line (e.g. gnome-disks).
# Unfortunately, this will also apply to floating windows, so it's not an ideal
# solution.
#for_window [class=.*] border pixel 2

# These only apply to new windows
default_border pixel 2
default_floating_border normal 2

# Right now these only work on new windows, like above. At some point they may
# also be applied to existing windows when tiling/floating is toggled.
# See https://github.com/i3/i3/issues/3588
# This also seems to fix the GTK3 border issue, and preserves titlebars for
# floating windows (see comment above).
for_window [tiling] border pixel 2
for_window [floating] border normal 2

# Default gaps
gaps inner 10
bindsym $mod+g [class=.*] border pixel 2; gaps outer all set 0, gaps inner all toggle 10
bindsym $mod+o gaps inner all set 0, gaps outer all set 0, [class=.*] border normal 2 

# Gaps modes
set $mode_gaps Gaps: (o)uter, (i)nner, (h)orizontal, (v)ertical, (t)op, (r)ight, (b)ottom, (l)eft
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_horiz Horizontal Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_verti Vertical Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_top Top Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_right Right Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_bottom Bottom Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_left Left Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
    bindsym o      mode "$mode_gaps_outer"
    bindsym i      mode "$mode_gaps_inner"
    bindsym h      mode "$mode_gaps_horiz"
    bindsym v      mode "$mode_gaps_verti"
    bindsym t      mode "$mode_gaps_top"
    bindsym r      mode "$mode_gaps_right"
    bindsym b      mode "$mode_gaps_bottom"
    bindsym l      mode "$mode_gaps_left"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "$mode_gaps_outer" {
    bindsym plus  gaps outer current plus 5
    bindsym minus gaps outer current minus 5
    bindsym 0     gaps outer current set 0

    bindsym Shift+plus  gaps outer all plus 5
    bindsym Shift+minus gaps outer all minus 5
    bindsym Shift+0     gaps outer all set 0

    bindsym Return mode "$mode_gaps"
    bindsym Escape mode "$mode_gaps"
}
mode "$mode_gaps_inner" {
    bindsym plus  gaps inner current plus 5
    bindsym minus gaps inner current minus 5
    bindsym 0     gaps inner current set 0

    bindsym Shift+plus  gaps inner all plus 5
    bindsym Shift+minus gaps inner all minus 5
    bindsym Shift+0     gaps inner all set 0

    bindsym Return mode "$mode_gaps"
    bindsym Escape mode "$mode_gaps"
}
mode "$mode_gaps_horiz" {
    bindsym plus  gaps horizontal current plus 5
    bindsym minus gaps horizontal current minus 5
    bindsym 0     gaps horizontal current set 0

    bindsym Shift+plus  gaps horizontal all plus 5
    bindsym Shift+minus gaps horizontal all minus 5
    bindsym Shift+0     gaps horizontal all set 0

    bindsym Return mode "$mode_gaps"
    bindsym Escape mode "$mode_gaps"
}
mode "$mode_gaps_verti" {
    bindsym plus  gaps vertical current plus 5
    bindsym minus gaps vertical current minus 5
    bindsym 0     gaps vertical current set 0

    bindsym Shift+plus  gaps vertical all plus 5
    bindsym Shift+minus gaps vertical all minus 5
    bindsym Shift+0     gaps vertical all set 0

    bindsym Return mode "$mode_gaps"
    bindsym Escape mode "$mode_gaps"
}
mode "$mode_gaps_top" {
    bindsym plus  gaps top current plus 5
    bindsym minus gaps top current minus 5
    bindsym 0     gaps top current set 0

    bindsym Shift+plus  gaps top all plus 5
    bindsym Shift+minus gaps top all minus 5
    bindsym Shift+0     gaps top all set 0

    bindsym Return mode "$mode_gaps"
    bindsym Escape mode "$mode_gaps"
}
mode "$mode_gaps_right" {
    bindsym plus  gaps right current plus 5
    bindsym minus gaps right current minus 5
    bindsym 0     gaps right current set 0

    bindsym Shift+plus  gaps right all plus 5
    bindsym Shift+minus gaps right all minus 5
    bindsym Shift+0     gaps right all set 0

    bindsym Return mode "$mode_gaps"
    bindsym Escape mode "$mode_gaps"
}
mode "$mode_gaps_bottom" {
    bindsym plus  gaps bottom current plus 5
    bindsym minus gaps bottom current minus 5
    bindsym 0     gaps bottom current set 0

    bindsym Shift+plus  gaps bottom all plus 5
    bindsym Shift+minus gaps bottom all minus 5
    bindsym Shift+0     gaps bottom all set 0

    bindsym Return mode "$mode_gaps"
    bindsym Escape mode "$mode_gaps"
}
mode "$mode_gaps_left" {
    bindsym plus  gaps left current plus 5
    bindsym minus gaps left current minus 5
    bindsym 0     gaps left current set 0

    bindsym Shift+plus  gaps left all plus 5
    bindsym Shift+minus gaps left all minus 5
    bindsym Shift+0     gaps left all set 0

    bindsym Return mode "$mode_gaps"
    bindsym Escape mode "$mode_gaps"
}


# Floating window exceptions
for_window [class="firefox" window_role="About"] floating enable, border normal 2

# Kicad
for_window [class="Kicad" title="3D Viewer"] floating enable, border normal 2

# Orage popup
for_window [class="Orage" title="^Orage$"] border pixel 2, move position mouse, move down 45
# 2140 45
